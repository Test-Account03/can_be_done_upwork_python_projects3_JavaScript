{
    "url": "https://www.upwork.com/jobs/Build-Lightweight-Student-Discounts-Website_~021979843678704877429/?referrer_url_path=/nx/search/jobs/",
    "專案名稱": "Build a Lightweight Student-Discounts Website",
    "專案描述": "We need a tiny, fast website that lists verified student discounts (coupons/codes/links) in and around Zürich. It must be mobile-first, static-first, and fee-free: we will supply a single JSON file and we want to be able to edit the json directly on the website for content updates. Deploy on Vercel’s free tier. We have a Figma screenshot as a visual reference for layout & style. Please look at the attached file for the full project description.",
    "地點": "Location\nSwitzerland",
    "額外資訊": "Fixed price\nIntermediate\nEst. budget:\n$100.00",
    "類別": "JavaScript",
    "ai_initail_anylizer": {
        "ai_position_title": "AI 客戶需求解析師",
        "response": "```markdown\n### 需求摘要\n客戶需要一個輕量、快速、行動優先的靜態網站，用於展示蘇黎世地區的學生折扣資訊。網站內容需從一個 JSON 檔案動態載入，且客戶希望能直接在網站上編輯並更新此 JSON 檔案。最終成品需部署在 Vercel 的免費方案上。\n\n### 初步功能點\n*   **折扣列表頁面**: 根據提供的 JSON 檔案，動態渲染所有學生折扣項目，包含優惠券代碼、連結、描述等資訊。\n*   **響應式與行動優先設計**: 依據 Figma 設計稿，實現網頁版面與樣式，並確保在手機、平板、桌面裝置上皆有良好瀏覽體驗。\n*   **內容管理機制 (核心功能)**: 提供一個讓客戶能直接更新 JSON 內容的介面。考量到零營運成本，建議方案為引導客戶至 GitHub 存放庫直接編輯 JSON 檔案，並利用 Vercel 的自動部署功能即時更新網站。\n*   **客戶端篩選/搜尋功能**: (建議功能) 在前端實現一個簡易的搜尋框或分類篩選器，讓使用者可以快速找到想要的折扣資訊。\n*   **Vercel 自動化部署**: 設定專案與 GitHub 存放庫連結，實現推送 (push) 更新後 Vercel 自動化建置與部署。\n\n### 技術關鍵詞\n*   **語言**: JavaScript\n*   **前端框架/函式庫**: Vanilla JS, React (Next.js), Svelte (SvelteKit), Astro\n*   **樣式**: CSS, Tailwind CSS\n*   **資料處理**: JSON, `fetch` API\n*   **部署與版本控制**: Git, GitHub, Vercel\n*   **核心技術概念**: 靜態網站生成 (Static Site Generation, SSG), 無伺服器函數 (Serverless Functions), Git-based CMS (將 GitHub 作為內容後台)\n\n### 待釐清問題列表\n1.  **關於內容編輯**: \"直接在網站上編輯 JSON\" 的具體期望是什麼？考量到預算與維護成本，是否能接受「登入 GitHub 網站來編輯 JSON 檔案，儲存後網站自動更新」的方案？這是在免費方案下最穩定可靠的做法。\n2.  **關於資料結構**: 是否能先提供一份範例 JSON 檔案？這將決定每個折扣項目包含哪些欄位（如：店家名稱、折扣內容、連結、有效期限、分類等）。\n3.  **關於設計稿**: Figma 設計稿是否包含行動版與桌面版的版面？是否有任何動態效果或使用者互動的具體說明？\n4.  **關於未來擴充**: 短期內是否有增加其他頁面（如「關於我們」）或更複雜功能（如使用者提交折扣）的計畫？這會影響初期的技術架構選擇。\n5.  **關於網域**: 網站是否需要綁定自訂網域？還是使用 Vercel 提供的免費子網域即可？\n```"
    },
    "ai_anylizer": {
        "ai_position_title": "AI 需求分析師與功能規劃師",
        "response": "```markdown\n### 0. 待釐清問題回覆 (Responses to Clarifications)\n\n*   **問題 1:** 關於內容編輯: \"直接在網站上編輯 JSON\" 的具體期望是什麼？考量到預算與維護成本，是否能接受「登入 GitHub 網站來編輯 JSON 檔案，儲存後網站自動更新」的方案？這是在免費方案下最穩定可靠的做法。\n*   **決策:** 建立一個受密碼保護的簡易後台頁面 (例如 `/admin`)，讓客戶能直接在該頁面編輯 JSON 內容並儲存。不採用引導至 GitHub 編輯的方案。\n*   **決策依據 (Reasoning):** 依據 [A] 原始專案描述中明確要求「we want to be able to edit the json directly on the website for content updates」。此為不可撼動的最高準則。所選方案利用 Vercel 的免費 Serverless Function，可以在不增加額外營運成本的前提下，實現一個在網站內直接編輯並觸發自動更新的完整流程，完全符合 [A] 的要求以及獨立開發的可行性。\n\n*   **問題 2:** 關於資料結構: 是否能先提供一份範例 JSON 檔案？這將決定每個折扣項目包含哪些欄位（如：店家名稱、折扣內容、連結、有效期限、分類等）。\n*   **決策:** 在客戶提供實際檔案前，我們將採用一個標準化的 JSON 結構。每個折扣項目將包含：`id` (唯一識別碼), `storeName` (店家名稱), `category` (分類), `description` (折扣描述), `type` (類型: 'code', 'link', 'in-store'), `value` (折扣碼或網址), 和 `notes` (備註，可選)。\n*   **決策依據 (Reasoning):** 依據 [A] 描述，專案圍繞一個 JSON 檔案運作。為使開發能立即啟動，定義一個清晰、可擴展的資料結構是必要的。此結構涵蓋了學生折扣網站常見的資訊欄位，符合 MVP 原則，能滿足核心展示需求。\n\n*   **問題 3:** 關於設計稿: Figma 設計稿是否包含行動版與桌面版的版面？是否有任何動態效果或使用者互動的具體說明？\n*   **決策:** 專案將嚴格遵循「mobile-first」原則，以 Figma 螢幕截圖作為唯一的視覺風格與佈局指南。所有開發將優先確保在行動裝置上的完美呈現，然後響應式地適應到桌面版。不包含任何 Figma 中未明確展示的複雜動態效果。\n*   **決策依據 (Reasoning):** [A] 中提及「mobile-first」和「Figma screenshot」，暗示了設計的簡潔性。此決策確保開發者能專注於核心功能，避免在設計細節上過度解讀，同時符合專案「tiny」和「fast」的要求。\n\n*   **問題 4:** 關於未來擴充: 短期內是否有增加其他頁面（如「關於我們」）或更複雜功能（如使用者提交折扣）的計畫？這會影響初期的技術架構選擇。\n*   **決策:** 本次開發範圍嚴格限定於 [A] 中描述的單一頁面折扣列表與後台編輯功能。不為任何未來的擴充功能預留或建構額外架構。\n*   **決策依據 (Reasoning):** [A] 描述的是一個「tiny」網站。為了符合獨立開發、低成本和快速交付的原則，應避免過度設計。採用最簡單的靜態網站生成（SSG）架構即可滿足所有現有需求。\n\n*   **問題 5:** 關於網域: 網站是否需要綁定自訂網域？還是使用 Vercel 提供的免費子網域即可？\n*   **決策:** 網站將部署在 Vercel 提供的免費子網域上 (例如 `project-name.vercel.app`)。\n*   **決策依據 (Reasoning):** [A] 明確要求「fee-free」（零費用）。使用 Vercel 的免費子網域是達成此目標的最直接方式，避免了購買和續訂網域的費用。\n\n### 1. 詳細功能規格書 (Functional Specification Document)\n\n#### 1.1. 核心功能 F-01: 學生折扣列表展示\n*   **目標 (Goal):** 在一個對行動裝置友善的頁面上，清晰地展示所有學生折扣資訊。\n*   **前置條件 (Precondition):** 專案的 GitHub 儲存庫中存在一個名為 `discounts.json` 的檔案，且檔案結構符合預期格式。\n*   **執行流程 (Execution Flow):**\n    1.  Vercel 在建置（Build）階段，讀取儲存庫中的 `discounts.json` 檔案。\n    2.  系統根據 JSON 檔案中的資料陣列，生成靜態的 HTML 頁面。\n    3.  每個 JSON 物件被渲染成一個獨立的「折扣卡片」(Discount Card)。\n    4.  頁面樣式需符合提供的 Figma 螢幕截圖，並採用行動優先的響應式設計。\n    5.  使用者瀏覽生成的 Vercel 網址，看到靜態的折扣列表頁面。\n*   **成功結果 (Success Outcome):** 使用者可以快速、流暢地在任何裝置上瀏覽所有學生折扣資訊。\n*   **錯誤處理 (Error Handling):**\n    *   **場景一：`discounts.json` 檔案不存在或格式錯誤** → **處理方式：** Vercel 建置過程將會失敗，並發出通知。網站將不會更新，保持上一個成功的版本。這確保了網站的穩定性。\n\n#### 1.2. 核心功能 F-02: 網站內 JSON 內容編輯\n*   **目標 (Goal):** 提供一個簡易、受密碼保護的介面，讓網站擁有者能直接在網站上更新 `discounts.json` 的內容。\n*   **前置條件 (Precondition):** Vercel 專案已設定好必要的環境變數（後台密碼、GitHub API Token）。\n*   **執行流程 (Execution Flow):**\n    1.  擁有者瀏覽網站的 `/admin` 頁面。\n    2.  頁面顯示一個密碼輸入框。\n    3.  擁有者輸入預設的密碼。\n    4.  系統驗證密碼。成功後，頁面顯示一個文字編輯區（`<textarea>`），其中包含從 GitHub 儲存庫即時讀取的 `discounts.json` 檔案的完整內容。\n    5.  擁有者在文字編輯區中直接修改 JSON 內容。\n    6.  擁有者點擊「儲存更新」按鈕。\n    7.  前端將文字編輯區的內容發送到一個 Vercel Serverless Function 端點。\n    8.  該 Serverless Function 驗證 JSON 格式是否正確。若不正確，則返回錯誤訊息給前端。\n    9.  若格式正確，Serverless Function 使用預存的 GitHub API Token，將新的 JSON 內容提交（commit）到 GitHub 儲存庫的主分支。\n    10. 該提交會自動觸發 Vercel 進行新一輪的建置與部署。\n    11. 前端頁面顯示「更新已送出，網站將在幾分鐘後生效」的提示訊息。\n*   **成功結果 (Success Outcome):** 網站擁有者成功更新了折扣列表，幾分鐘後公開網站上顯示出最新的資訊。\n*   **錯誤處理 (Error Handling):**\n    *   **場景一：輸入的密碼錯誤** → **處理方式：** 頁面顯示「密碼錯誤」的提示，不載入編輯器。\n    *   **場景二：儲存時提交的內容非法的 JSON 格式** → **處理方式：** Serverless Function 拒絕該請求，前端頁面顯示錯誤訊息「JSON 格式無效，請檢查後再試」。\n    *   **場景三：GitHub API Token 失效或權限不足** → **處理方式：** Serverless Function 提交失敗，前端頁面顯示「無法儲存至儲存庫，請聯繫開發者」。\n\n### 2. 使用者故事 (User Stories)\n\n*   **US-01:** 作為一個 **蘇黎世的學生**，我想要 **在一個簡單的網頁上快速找到所有學生折扣**，以便 **我能輕鬆省錢**。\n*   **US-02:** 作為一個 **網站擁有者**，我想要 **直接在網站上的一個簡單頁面編輯和更新折扣列表**，以便 **我能隨時保持資訊的時效性，而無需了解程式碼或聯絡開發者**。\n*   **US-03:** 作為一個 **用手機瀏覽的學生**，我想要 **網站版面能自動適應我的手機螢幕**，以便 **我能方便地閱讀和查找資訊**。\n\n### 3. 驗收標準 (Acceptance Criteria)\n\n#### 針對 US-01 的驗收標準:\n*   **場景 1.1 (Scenario):** 成功瀏覽折扣列表\n    *   **鑑於 (Given):** `discounts.json` 檔案包含三筆有效的折扣資料。\n    *   **當 (When):** 我開啟網站首頁。\n    *   **那麼 (Then):** 我應該看到一個包含三張「折扣卡片」的列表。\n    *   **而且 (And):** 每張卡片都應顯示店家名稱和折扣描述。\n\n#### 針對 US-02 的驗收標準:\n*   **場景 2.1 (Scenario):** 成功更新折扣內容\n    *   **鑑於 (Given):** 我已登入 `/admin` 頁面，且編輯器中顯示了現有的 JSON 內容。\n    *   **當 (When):** 我在編輯器中新增一筆新的折扣資料，並點擊「儲存更新」。\n    *   **那麼 (Then):** 我會看到一條成功送出的提示訊息。\n    *   **而且 (And):** 在 Vercel 完成重新部署後（約 2-3 分鐘），我在網站首頁能看到我剛剛新增的那筆折扣資料。\n\n*   **場景 2.2 (Scenario):** 嘗試儲存無效的 JSON 內容\n    *   **鑑於 (Given):** 我已登入 `/admin` 頁面。\n    *   **當 (When):** 我在編輯器中刪除了一個重要的逗號導致 JSON 格式錯誤，並點擊「儲存更新」。\n    *   **那麼 (Then):** 我應該在頁面上看到一條錯誤訊息，指出「JSON 格式無效」。\n    *   **而且 (And):** 網站首頁的內容不會有任何改變。\n\n#### 針對 US-03 的驗收標準:\n*   **場景 3.1 (Scenario):** 在手機上瀏覽\n    *   **鑑於 (Given):** 我正在使用螢幕寬度為 375px 的手機模擬器或實體手機。\n    *   **當 (When):** 我載入網站首頁。\n    *   **那麼 (Then):** 所有內容（文字、卡片）都應該在螢幕範圍內完全可見，不出現水平捲軸。\n    *   **而且 (And):** 文字大小適中，易於閱讀。\n```"
    },
    "ai_architect": {
        "ai_position_title": "AI Python 系統架構師",
        "response": "```markdown\n### 1. 技術棧建議 (Technology Stack Recommendation)\n\n*   **後端框架 (Backend Framework):** **Flask**\n    *   **理由:** Flask 是一個微框架，極其輕量且靈活，完美符合專案「tiny」和「fast」的核心要求。它沒有不必要的內建功能，可以讓我們只引入實現核心功能所需的函式庫。Flask 能輕易地打包成 Vercel 的 Serverless Function，實現零伺服器維運成本的部署，非常適合獨立開發者的預算限制。\n    *   **Vercel 部署架構指令 (CRITICAL Vercel Deployment Architecture):** 為了確保專案能在 Vercel 環境中成功部署且路徑解析正確，你作為架構師必須定義並傳達以下這個三位一體的架構藍圖給下游的 ai_coder。這不是一個建議，而是一個強制性的設計規範。\n        *   **第一部分：專案結構規範 (Project Structure Specification)**\n            你必須指令 ai_coder 建立一個巢狀的檔案結構。Flask 主應用程式 (index.py) 必須位於 `api/` 子目錄中，而 `templates` 和 `static` 等前端資源資料夾必須位於專案根目錄，與 `api/` 資料夾同級。\n            ```\n            / (專案根目錄)\n            ├── api/\n            │   └── index.py          <-- 主應用程式\n            ├── static/\n            │   └── ...               <-- 前端靜態資源\n            ├── templates/\n            │   └── ...               <-- HTML 模板\n            ├── discounts.json        <-- 資料來源\n            ├── vercel.json\n            └── requirements.txt\n            ```\n        *   **第二部分：Vercel 配置規範 (vercel.json Specification)**\n            你必須指令 ai_coder 生成的 `vercel.json` 內容需要完全匹配上述結構，即 `builds` 的 `src` 必須指向 `api/index.py`，並且 `rewrites` 規則需要設定以將所有請求導向該 Flask 應用。\n            ```json\n            {\n              \"builds\": [\n                {\n                  \"src\": \"api/index.py\",\n                  \"use\": \"@vercel/python\"\n                }\n              ],\n              \"routes\": [\n                {\n                  \"src\": \"/(.*)\",\n                  \"dest\": \"api/index.py\"\n                }\n              ]\n            }\n            ```\n        *   **第三部分：Flask 初始化規範 (Flask Initialization Specification)**\n            基於以上兩點結構規範，你必須明確指出，在 `api/index.py` 中初始化 Flask 應用時，必須使用以下程式碼來進行路徑回溯，以找到根目錄的 `templates` 和 `static` 資料夾。請將這段程式碼作為一個必須執行的命令傳達下去。\n            ```python\n            # 位於 api/index.py 的程式碼\n            import os\n            from flask import Flask\n\n            # 取得目前檔案的目錄，然後往上一層找到根目錄\n            # 這確保無論在哪個環境執行，都能正確找到 templates 和 static\n            project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))\n            \n            app = Flask(__name__, \n                      template_folder=os.path.join(project_root, 'templates'), \n                      static_folder=os.path.join(project_root, 'static'))\n            ```\n\n*   **資料儲存 (Data Storage):** **單一 JSON 檔案 (`discounts.json`)**\n    *   **理由:** 根據功能規格書 (FSD)，所有折扣資料都來自一個 JSON 檔案。此方案完美實現了零營運成本的目標。資料的「持久化」和版本控制由 Git 天然提供。內容更新是透過後台功能觸發 GitHub API，將新內容 commit 回儲存庫，這會自動觸發 Vercel 重新部署，生成新的靜態網站，流程簡單且可靠。\n\n*   **前端介面 (Frontend Interface):** **原生 HTML/CSS/JavaScript 搭配 Jinja2 模板**\n    *   **理由:** FSD 描述了一個簡單的列表頁面和一個後台編輯頁面。使用 Flask 內建的 Jinja2 模板引擎可以在 Vercel 建置階段直接從 `discounts.json` 渲染出靜態的 HTML 列表頁，實現極速載入。後台 `/admin` 頁面則使用原生 JavaScript 處理密碼驗證和對後端 Serverless Function 的 AJAX 請求，無需引入任何重型前端框架，保持專案的輕量化。\n\n*   **AI 模型 (AI Model):** **不適用**\n    *   **理由:** 此專案的核心功能是資料的展示與編輯，不涉及任何 AI 內容生成或分析的需求，因此無需整合 AI 模型。\n\n*   **核心函式庫 (Key Libraries):**\n    *   `Flask`: Web 框架核心。\n    *   `requests`: 用於向 GitHub API 發送 HTTP 請求以更新 JSON 檔案。\n    *   `python-dotenv`: (僅供本地開發使用) 用於從 `.env` 檔案載入環境變數。\n\n### 2. 專案結構圖 (Project Structure for Vercel)\n\n```\n/ (專案根目錄)\n├── api/\n│   └── index.py          # Flask 主應用程式，包含首頁渲染和後台 API 邏輯\n├── static/\n│   └── css/\n│       └── style.css     # 網站主要樣式表\n│   └── js/\n│       └── admin.js      # 後台頁面的 JavaScript 邏輯\n├── templates/\n│   ├── index.html        # 公開的折扣列表頁面模板\n│   └── admin.html        # 受密碼保護的後台編輯頁面模板\n├── discounts.json        # 儲存所有折扣資料的唯一來源\n├── vercel.json           # Vercel 部署設定檔\n├── requirements.txt      # Python 依賴函式庫列表\n└── .gitignore            # Git 忽略檔案設定\n```\n\n### 3. 資料模型 (Data Model)\n\n本專案的資料儲存於根目錄的 `discounts.json` 檔案中。該檔案的結構是一個包含多個折扣物件的 JSON 陣列。每個折扣物件的結構如下：\n\n```json\n[\n  {\n    \"id\": \"string\",          // 唯一識別碼，例如 UUID\n    \"storeName\": \"string\",   // 店家名稱\n    \"category\": \"string\",    // 分類 (例如: Food, Books, Tech)\n    \"description\": \"string\", // 折扣內容的簡短描述\n    \"type\": \"string\",        // 類型: 'code', 'link', 'in-store'\n    \"value\": \"string\",       // 折扣碼或對應的 URL 連結\n    \"notes\": \"string\"        // 額外備註 (可選)\n  }\n]\n```\n\n### 4. 外部 API 整合方案 (External API Integration Plan)\n\n本專案需要整合 **GitHub API** 以實現在網站後台更新 `discounts.json` 檔案的功能。\n\n*   **端點 (Endpoint):** `/repos/{owner}/{repo}/contents/{path}`\n*   **認證方式 (Authentication):** 使用 GitHub Personal Access Token (PAT)。此 Token 必須儲存在 Vercel 的環境變數 `GITHUB_API_KEY` 中，並授予 `repo` 存取權限。嚴禁將 Token 硬編碼在程式碼中。\n*   **執行流程:**\n    1.  後台 Serverless Function (`/api/update`) 接收到前端傳來的新 JSON 內容。\n    2.  該函式首先會呼叫 GitHub API **讀取** `discounts.json` 的最新版本，以取得檔案的 `sha` 雜湊值，這是更新檔案所必需的。\n    3.  接著，函式會發送一個 `PUT` 請求到 GitHub API 的內容端點。\n    4.  請求的 `body` 中需包含：\n        *   `message`: Commit 的訊息 (例如: \"Content update from web admin\")。\n        *   `content`: 新的 JSON 內容，需經過 Base64 編碼。\n        *   `sha`: 上一步取得的檔案 `sha` 雜湊值。\n    5.  GitHub API 成功接收後，會建立一個新的 commit，這將自動觸發 Vercel 的重新部署流程。\n\n### 5. 使用者認證 (User Authentication)\n\n根據 FSD 的要求，本專案**無需**複雜的 OAuth 使用者系統。後台 `/admin` 頁面將採用**簡單密碼保護**機制。\n\n*   **實現方式:** 在 Vercel 中設定一個環境變數 `ADMIN_PASSWORD`。當使用者訪問 `/admin` 時，後端邏輯會比對使用者提交的密碼與該環境變數的值是否相符。此方案完全符合「最小化基礎設施原則」，同時滿足了 FSD 中定義的簡易保護需求。\n\n### 6. 環境變數 (Environment Variables)\n\n為了讓系統正常運作，必須在 Vercel 專案設定中配置以下環境變數：\n\n*   `FLASK_SECRET_KEY`: Flask 用於安全簽署的密鑰。雖然本專案不使用 session，但設定此變數是良好實踐。\n*   `GITHUB_API_KEY`: 具有 `repo` 權限的 GitHub Personal Access Token，用於在後台更新 `discounts.json`。\n*   `GITHUB_REPO_FULL_NAME`: GitHub 儲存庫的完整名稱，格式為 `username/repository-name` (例如 `johndoe/student-discounts`)。\n*   `ADMIN_PASSWORD`: 用於保護 `/admin` 頁面的自訂密碼。\n\n### 7. 開發者備註：最小化基礎設施原則 (Principle of Minimal Infrastructure)\n\n本架構設計嚴格遵循了「最小化基礎設施原則」，專注於快速實現核心功能：\n\n1.  **無用戶系統:** 採用簡單的環境變數密碼，避免了引入複雜的用戶資料庫和 OAuth 流程。\n2.  **無資料庫:** 專案的「資料庫」就是 Git 儲存庫中的一個 JSON 檔案，完美契合了零成本和簡易維護的需求。\n3.  **最小化依賴:** 僅使用 `Flask` 和 `requests` 兩個核心函式庫，保持了專案的輕量和快速部署。\n\n此架構讓獨立開發者能將所有精力集中在實現「學生能看折扣列表」和「擁有者能在網站上更新列表」這兩個核心使用者故事上，以最低的成本和最快的速度交付一個完全符合客戶需求的可用產品。\n```"
    },
    "ai_designer": {
        "ai_position_title": "AI 介面設計顧問",
        "response": "```markdown\n### 網頁路由與視圖設計 (Page Routing & View Design)\n\n| HTTP Method   | Route Path         | Flask View Function  | Jinja2 Template        | 說明 (Description)                                                                                                                                     |\n| :----------   | :----------------- | :------------------- | :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `GET`         | `/`                | `index()`            | `index.html`           | 渲染公開的折扣列表主頁。此視圖會讀取 `discounts.json` 檔案，並將資料傳遞給模板進行靜態頁面渲染，確保極速載入。                                 |\n| `GET`, `POST` | `/admin`           | `admin()`            | `admin.html`           | 處理後台頁面。`GET` 請求會檢查 session；若已登入，則顯示編輯器，否則顯示密碼輸入表單。`POST` 請求則用於驗證使用者提交的密碼並建立登入 session。 |\n| `GET`         | `/api/discounts`   | `get_discounts()`    | (無，返回 JSON)        | 受保護的 API 端點，供後台頁面的 JavaScript 呼叫。它會讀取並返回 `discounts.json` 的原始文字內容，以便在編輯器中顯示。                                |\n| `POST`        | `/api/update`      | `update_discounts()` | (無，返回 JSON)        | 受保護的 API 端點。接收來自後台編輯器的新 JSON 內容，驗證其格式，然後透過 GitHub API 將變更 commit 回儲存庫，觸發 Vercel 重新部署。             |\n| `POST`        | `/api/logout`      | `logout()`           | (無，返回 JSON)        | 清除伺服器端的 session，將管理者登出。前端 JavaScript 接收到成功回應後應重新載入頁面，返回到密碼輸入狀態。                                           |\n\n### 頁面佈局與元件設計 (Page Layout & Component Design)\n\n#### 1. 整體結構 (Overall Structure)\n\n此專案為一個功能導向的輕量級網站，由兩個核心頁面構成：公開的 `index.html` 和後台管理的 `admin.html`。\n\n*   **風格指南**: 整體風格遵循「極致輕量」和「mobile-first」原則。佈局乾淨、留白充足，使用單一易讀的無襯線字體（如 Inter, Lato 或系統預設字體）。色彩以中性色為主（白、灰），搭配一個品牌強調色。\n*   **通用佈局**: 採用單欄佈局，在行動裝置上寬度為 100%，在桌面裝置上設置最大寬度（例如 `max-width: 800px;`）並水平置中，以確保閱讀舒適度。\n*   **零依賴**: 所有互動效果應使用原生 JavaScript (ES6+) 實現，避免引入如 jQuery, React 等外部函式庫，以保持頁面載入速度。\n\n#### 2. 元件詳解 (`index.html` - 公開折扣列表)\n\n##### Component A: 頁首 (Header)\n*   **HTML 結構 (存在於 `index.html` 模板):**\n    ```html\n    <header class=\"site-header\">\n        <h1>Zürich Student Discounts</h1>\n        <p>Verified deals for students in and around Zürich.</p>\n    </header>\n    ```\n*   **佈局與樣式:**\n    *   固定在頁面頂部或作為頁面的第一個元素。\n    *   使用 `text-align: center;` 讓標題居中。\n    *   `padding: 20px 15px;` 提供足夠的呼吸空間。\n    *   `h1` 字體稍大，`p` 字體顏色稍淺，形成視覺層次。\n*   **互動邏輯:**\n    *   無互動，純展示。\n\n##### Component B: 分類過濾器 (Category Filter)\n*   **HTML 結構 (由 JS 根據 JSON 數據動態生成或由 Jinja2 渲染):**\n    ```html\n    <nav class=\"category-filter\">\n        <button class=\"filter-btn active\" data-category=\"all\">All</button>\n        <button class=\"filter-btn\" data-category=\"Food\">Food</button>\n        <button class=\"filter-btn\" data-category=\"Books\">Books</button>\n        <!-- Other categories... -->\n    </nav>\n    ```\n*   **佈局與樣式:**\n    *   位於頁首下方，作為一個橫向滾動的按鈕列，方便在行動裝置上操作。\n    *   使用 `display: flex; overflow-x: auto;` 實現。\n    *   按鈕樣式簡潔，`padding` 適中，選中狀態（`.active`）有明顯的背景色或邊框色變化。\n*   **互動邏輯:**\n    *   使用 JavaScript 監聽按鈕點擊事件。\n    *   點擊時，讀取按鈕的 `data-category` 屬性。\n    *   遍歷下方的「折扣卡片」列表，僅顯示 `data-category` 與按鈕匹配的卡片，其他則設置 `display: none;`。\n    *   此過濾為純前端操作，響應即時，符合「fast」原則。\n\n##### Component C: 折扣卡片 (Discount Card)\n*   **HTML 結構 (由 Jinja2 迴圈 `discounts.json` 生成):**\n    ```html\n    <article class=\"discount-card\" data-category=\"{{ discount.category }}\">\n        <div class=\"card-header\">\n            <h2 class=\"store-name\">{{ discount.storeName }}</h2>\n            <span class=\"category-tag\">{{ discount.category }}</span>\n        </div>\n        <p class=\"description\">{{ discount.description }}</p>\n        <div class=\"action-area\">\n            {% if discount.type == 'code' %}\n                <div class=\"coupon-code\" onclick=\"copyToClipboard('{{ discount.value }}')\">\n                    <span>{{ discount.value }}</span>\n                    <button>Copy</button>\n                </div>\n            {% elif discount.type == 'link' %}\n                <a href=\"{{ discount.value }}\" target=\"_blank\" class=\"action-link\">Get Deal</a>\n            {% else %}\n                <p class=\"in-store-info\">Show your student ID in-store.</p>\n            {% endif %}\n        </div>\n        {% if discount.notes %}\n            <small class=\"notes\">Notes: {{ discount.notes }}</small>\n        {% endif %}\n    </article>\n    ```\n*   **佈局與樣式:**\n    *   卡片之間有 `margin-bottom` 分隔。\n    *   使用 `border` 或 `box-shadow` 創造卡片感。\n    *   內部使用 Flexbox 佈局，`card-header` 中店名和標籤分列左右。\n    *   `action-area` 樣式需清晰，優惠碼（coupon-code）設計成可點擊複製的樣式，連結（action-link）設計成按鈕樣式。\n*   **互動邏輯:**\n    *   當 `type` 為 `code` 時，點擊卡片或複製按鈕，會觸發一個簡單的 `copyToClipboard` JavaScript 函式，將 `discount.value` 複製到剪貼簿，並可提供一個短暫的「Copied!」視覺回饋。\n    *   當 `type` 為 `link` 時，它是一個標準的 `<a>` 標籤，點擊後在新分頁中打開連結。\n\n#### 3. 元件詳解 (`admin.html` - 後台管理)\n\n##### Component D: 密碼表單 (Password Form)\n*   **HTML 結構 (存在於 `admin.html` 模板，由 Jinja2 條件渲染):**\n    ```html\n    {% if not session.get('logged_in') %}\n    <div class=\"login-container\">\n        <form method=\"POST\" action=\"/admin\">\n            <h2>Admin Access</h2>\n            <input type=\"password\" name=\"password\" placeholder=\"Password\" required>\n            <button type=\"submit\">Login</button>\n        </form>\n    </div>\n    {% endif %}\n    ```\n*   **佈局與樣式:**\n    *   垂直和水平居中於頁面中央。\n    *   乾淨的表單設計，輸入框和按鈕有清晰的 `:focus` 狀態。\n*   **互動邏輯:**\n    *   標準的 HTML 表單提交。使用者輸入密碼後點擊「Login」，瀏覽器會向 `/admin` 發送一個 `POST` 請求。後端驗證成功後會設置 session 並重新載入頁面，顯示下方的編輯器介面。\n\n##### Component E: 內容編輯器 (Content Editor)\n*   **HTML 結構 (存在於 `admin.html` 模板，由 Jinja2 條件渲染):**\n    ```html\n    {% if session.get('logged_in') %}\n    <div class=\"editor-container\">\n        <header class=\"admin-header\">\n            <h1>Content Editor</h1>\n            <button id=\"logout-btn\">Logout</button>\n        </header>\n        <p class=\"instructions\">Edit the JSON content below. Ensure the format is correct before saving.</p>\n        <textarea id=\"json-editor\" spellcheck=\"false\"></textarea>\n        <div class=\"action-panel\">\n            <button id=\"save-btn\">Save Changes</button>\n            <span id=\"status-indicator\"></span>\n        </div>\n    </div>\n    {% endif %}\n    ```\n*   **佈局與樣式:**\n    *   `editor-container` 佔據頁面主要空間。\n    *   `<textarea>` 應佔用大部分可視高度（`height: 60vh;`），並使用等寬字體（monospace）以方便編輯 JSON。\n    *   `action-panel` 固定在編輯器下方，包含儲存按鈕和狀態提示文字。\n*   **互動邏輯:**\n    1.  **載入**: 頁面載入後，`admin.js` 會立即發送一個 `fetch` `GET` 請求到 `/api/discounts`。\n    2.  **填充**: 成功獲取資料後，將返回的 JSON 字串填入 `id=\"json-editor\"` 的 `<textarea>` 中。\n    3.  **儲存**: 當使用者點擊 `id=\"save-btn\"` 按鈕時：\n        *   JavaScript 會先嘗試用 `JSON.parse()` 驗證 `<textarea>` 中的內容是否為合法的 JSON，若不是，則在 `status-indicator` 中提示錯誤並中止。\n        *   驗證通過後，按鈕變為禁用狀態，`status-indicator` 顯示「Saving...」。\n        *   發送一個 `fetch` `POST` 請求到 `/api/update`，請求體為 `<textarea>` 中的 JSON 字串。\n        *   根據 API 的回傳結果，在 `status-indicator` 中顯示「Saved successfully!」或「Error: [message]」。\n    4.  **登出**: 點擊 `id=\"logout-btn\"` 會發送 `POST` 請求到 `/api/logout`，成功後 `window.location.reload()` 重新整理頁面。\n```"
    },
    "ai_coder": {
        "ai_position_title": "AI 專案程式碼生成器",
        "project_files": [
            {
                "file_path": "api/index.py",
                "file_content": "import os\nimport json\nimport base64\nimport requests\nfrom flask import Flask, render_template, request, jsonify, session, redirect, url_for\n\n# Try to load environment variables for local development\ntry:\n    from dotenv import load_dotenv\n    load_dotenv()\nexcept ImportError:\n    # dotenv is not required in production, so we can pass\n    pass\n\n# This is the main entry point for the Vercel serverless function.\n# The pathing configuration is critical for Vercel deployment.\napp = Flask(__name__, template_folder='../templates', static_folder='../static')\n\n# Load configuration from environment variables\napp.secret_key = os.getenv('FLASK_SECRET_KEY', 'a-very-secret-key-for-dev')\nADMIN_PASSWORD = os.getenv('ADMIN_PASSWORD')\nGITHUB_API_KEY = os.getenv('GITHUB_API_KEY')\nGITHUB_REPO_FULL_NAME = os.getenv('GITHUB_REPO_FULL_NAME') # e.g., 'your-username/your-repo'\nDISCOUNTS_FILE_PATH_IN_REPO = 'discounts.json'\n\ndef get_discounts_file_local_path():\n    \"\"\"Gets the absolute local path to the discounts.json file.\"\"\"\n    # The data file is in the root, one level up from the 'api' directory\n    return os.path.join(os.path.dirname(__file__), '..', DISCOUNTS_FILE_PATH_IN_REPO)\n\n@app.route('/')\ndef discount_display_workflow():\n    \"\"\"Renders the main public page with the list of discounts.\"\"\"\n    try:\n        local_path = get_discounts_file_local_path()\n        with open(local_path, 'r', encoding='utf-8') as f:\n            discounts = json.load(f)\n        \n        # Getting all unique categories to create the filter buttons dynamically\n        all_categories = sorted(list(set(d.get('category', 'General') for d in discounts)))\n        \n        return render_template('index.html', discounts=discounts, categories=all_categories)\n    except (FileNotFoundError, json.JSONDecodeError) as e:\n        # If the file is missing or broken, show an empty page with an error\n        return render_template('index.html', discounts=[], categories=[], error=f\"Could not load discount data: {e}\")\n\n@app.route('/admin', methods=['GET', 'POST'])\ndef manage_admin_panel():\n    \"\"\"Handles the admin login and displays the editor page.\"\"\"\n    if not ADMIN_PASSWORD:\n        return \"Error: ADMIN_PASSWORD environment variable is not set on the server.\", 500\n\n    if request.method == 'POST':\n        submitted_password = request.form.get('password')\n        if submitted_password == ADMIN_PASSWORD:\n            session['logged_in'] = True\n            return redirect(url_for('manage_admin_panel'))\n        else:\n            # Failed login attempt, just show the login page again\n            return render_template('admin.html', error=\"Invalid password\")\n\n    return render_template('admin.html')\n\n@app.route('/api/discounts', methods=['GET'])\ndef get_discounts_api():\n    \"\"\"API endpoint to fetch the raw JSON content for the admin editor.\"\"\"\n    if not session.get('logged_in'):\n        return jsonify({'error': 'Unauthorized access'}), 401\n\n    try:\n        local_path = get_discounts_file_local_path()\n        with open(local_path, 'r', encoding='utf-8') as f:\n            content = f.read()\n        return jsonify({'content': content})\n    except FileNotFoundError:\n        return jsonify({'error': 'The discounts.json file could not be found.'}), 404\n\n@app.route('/api/update', methods=['POST'])\ndef update_discounts_via_github():\n    \"\"\"API endpoint that receives new JSON and commits it to GitHub.\"\"\"\n    if not session.get('logged_in'):\n        return jsonify({'error': 'Unauthorized access'}), 401\n    \n    if not all([GITHUB_API_KEY, GITHUB_REPO_FULL_NAME]):\n        return jsonify({'error': 'GitHub integration environment variables are not configured on the server.'}), 500\n\n    new_content_str = request.data.decode('utf-8')\n    \n    try:\n        json.loads(new_content_str)\n    except json.JSONDecodeError:\n        return jsonify({'error': 'The provided content is not valid JSON.'}), 400\n\n    github_api_url = f\"https://api.github.com/repos/{GITHUB_REPO_FULL_NAME}/contents/{DISCOUNTS_FILE_PATH_IN_REPO}\"\n    headers = {\n        'Authorization': f'token {GITHUB_API_KEY}',\n        'Accept': 'application/vnd.github.v3+json'\n    }\n\n    try:\n        get_response = requests.get(github_api_url, headers=headers)\n        get_response.raise_for_status()\n        current_sha = get_response.json()['sha']\n    except requests.exceptions.RequestException as e:\n        return jsonify({'error': f'Failed to fetch current file from GitHub: {str(e)}'}), 500\n\n    encoded_content = base64.b64encode(new_content_str.encode('utf-8')).decode('utf-8')\n    commit_message = \"Content update from web admin panel\"\n    \n    update_data = {\n        \"message\": commit_message,\n        \"content\": encoded_content,\n        \"sha\": current_sha\n    }\n\n    try:\n        put_response = requests.put(github_api_url, headers=headers, json=update_data)\n        put_response.raise_for_status()\n        return jsonify({'success': 'File updated on GitHub. A new deployment should start shortly.'})\n    except requests.exceptions.RequestException as e:\n        error_details = e.response.json().get('message', str(e)) if e.response else str(e)\n        return jsonify({'error': f'Failed to update file on GitHub: {error_details}'}), 500\n\n@app.route('/api/logout', methods=['POST'])\ndef process_logout_request():\n    \"\"\"Clears the user's session to log them out.\"\"\"\n    session.clear()\n    return jsonify({'success': 'Logged out successfully.'})\n",
                "language": "python"
            },
            {
                "file_path": "templates/index.html",
                "file_content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Zürich Student Discounts</title>\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/style.css') }}\">\n</head>\n<body>\n\n    <div class=\"container\">\n        <header class=\"site-header\">\n            <h1>Zürich Student Discounts</h1>\n            <p>Verified deals for students in and around Zürich.</p>\n        </header>\n\n        {% if categories %}\n        <nav class=\"category-filter\">\n            <button class=\"filter-btn active\" data-category=\"all\">All</button>\n            {% for category in categories %}\n            <button class=\"filter-btn\" data-category=\"{{ category }}\">{{ category }}</button>\n            {% endfor %}\n        </nav>\n        {% endif %}\n\n        <main>\n            {% if discounts %}\n                {% for discount in discounts %}\n                <article class=\"discount-card\" data-category=\"{{ discount.category }}\">\n                    <div class=\"card-header\">\n                        <h2 class=\"store-name\">{{ discount.storeName }}</h2>\n                        <span class=\"category-tag\">{{ discount.category }}</span>\n                    </div>\n                    <p class=\"description\">{{ discount.description }}</p>\n                    <div class=\"action-area\">\n                        {% if discount.type == 'code' %}\n                            <div class=\"coupon-code\">\n                                <span>{{ discount.value }}</span>\n                                <button onclick=\"copyToClipboard('{{ discount.value }}', this)\">Copy</button>\n                            </div>\n                        {% elif discount.type == 'link' %}\n                            <a href=\"{{ discount.value }}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"action-link\">Get Deal</a>\n                        {% elif discount.type == 'in-store' %}\n                            <p class=\"in-store-info\">Show your student ID in-store.</p>\n                        {% else %}\n                            <p class=\"in-store-info\">{{ discount.value }}</p>\n                        {% endif %}\n                    </div>\n                    {% if discount.notes %}\n                        <small class=\"notes\">Notes: {{ discount.notes }}</small>\n                    {% endif %}\n                </article>\n                {% endfor %}\n            {% else %}\n                <p>No discounts available at the moment. Please check back later!</p>\n                {% if error %}\n                    <p style=\"color: red;\"><strong>Error:</strong> {{ error }}</p>\n                {% endif %}\n            {% endif %}\n        </main>\n    </div>\n\n    <script src=\"{{ url_for('static', filename='js/main.js') }}\"></script>\n</body>\n</html>\n",
                "language": "html"
            },
            {
                "file_path": "templates/admin.html",
                "file_content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Admin Panel</title>\n    <link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/style.css') }}\">\n</head>\n<body>\n\n    {% if session.get('logged_in') %}\n        <div class=\"editor-container\">\n            <header class=\"admin-header\">\n                <h1>Content Editor</h1>\n                <button id=\"logout-btn\" class=\"admin-btn\">Logout</button>\n            </header>\n            <p class=\"instructions\">Edit the JSON content below. The changes will be committed to the GitHub repository, triggering a new deployment.</p>\n            <textarea id=\"json-editor\" spellcheck=\"false\" placeholder=\"Loading data...\"></textarea>\n            <div class=\"action-panel\">\n                <button id=\"save-btn\" class=\"admin-btn\">Save Changes & Deploy</button>\n                <span id=\"status-indicator\"></span>\n            </div>\n        </div>\n        <script src=\"{{ url_for('static', filename='js/admin.js') }}\"></script>\n    {% else %}\n        <div class=\"login-container\">\n            <form method=\"POST\" action=\"{{ url_for('manage_admin_panel') }}\">\n                <h2>Admin Access</h2>\n                <p>Enter the password to manage content.</p>\n                <input type=\"password\" name=\"password\" placeholder=\"Password\" required autofocus>\n                <br>\n                <button type=\"submit\" class=\"admin-btn\">Login</button>\n                 {% if error %}\n                    <p style=\"color: red; margin-top: 15px;\">{{ error }}</p>\n                {% endif %}\n            </form>\n        </div>\n    {% endif %}\n\n</body>\n</html>\n",
                "language": "html"
            },
            {
                "file_path": "static/css/style.css",
                "file_content": "/* General Styling */\nbody {\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\n    line-height: 1.6;\n    background-color: #f8f9fa;\n    color: #212529;\n    margin: 0;\n    padding: 0 15px;\n}\n\n.container {\n    max-width: 800px;\n    margin: 20px auto;\n    padding: 10px;\n}\n\n/* Header */\n.site-header {\n    text-align: center;\n    margin-bottom: 30px;\n    padding-bottom: 20px;\n    border-bottom: 1px solid #dee2e6;\n}\n.site-header h1 { margin: 0; font-size: 2.2rem; color: #343a40; }\n.site-header p { margin: 5px 0 0; font-size: 1.1rem; color: #6c757d; }\n\n/* Category Filter */\n.category-filter {\n    display: flex;\n    overflow-x: auto;\n    padding-bottom: 15px;\n    margin-bottom: 20px;\n    -webkit-overflow-scrolling: touch;\n    scrollbar-width: none; /* Firefox */\n}\n.category-filter::-webkit-scrollbar { display: none; } /* Chrome, Safari, Opera */\n\n.filter-btn {\n    flex-shrink: 0;\n    padding: 8px 16px;\n    margin-right: 10px;\n    border: 1px solid #ced4da;\n    border-radius: 20px;\n    background-color: #fff;\n    color: #495057;\n    cursor: pointer;\n    font-size: 0.9rem;\n    transition: all 0.2s ease-in-out;\n}\n.filter-btn:hover { background-color: #e9ecef; }\n.filter-btn.active { background-color: #007bff; color: #fff; border-color: #007bff; }\n\n/* Discount Card */\n.discount-card {\n    background-color: #ffffff;\n    border-radius: 8px;\n    padding: 20px;\n    margin-bottom: 20px;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.05);\n}\n\n.card-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-bottom: 10px;\n}\n.store-name { margin: 0; font-size: 1.5rem; color: #343a40; }\n.category-tag {\n    background-color: #e9ecef;\n    color: #495057;\n    padding: 4px 10px;\n    border-radius: 12px;\n    font-size: 0.8rem;\n    font-weight: 500;\n    flex-shrink: 0;\n    margin-left: 10px;\n}\n.description { color: #495057; margin-bottom: 15px; }\n.notes {\n    display: block;\n    margin-top: 15px;\n    font-size: 0.85rem;\n    color: #6c757d;\n    border-top: 1px dashed #ced4da;\n    padding-top: 10px;\n}\n\n/* Action Area in Card */\n.action-area .coupon-code {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    background-color: #f1f3f5;\n    border: 1px dashed #adb5bd;\n    border-radius: 5px;\n    padding: 10px 15px;\n}\n.action-area .coupon-code span { font-family: 'Courier New', Courier, monospace; font-weight: bold; color: #d63384; letter-spacing: 1px; }\n.action-area .coupon-code button { background: #6c757d; color: white; border: none; border-radius: 4px; padding: 5px 10px; cursor: pointer; }\n.action-area .action-link { display: inline-block; background-color: #28a745; color: #fff; text-decoration: none; padding: 10px 20px; border-radius: 5px; font-weight: bold; transition: background-color 0.2s; }\n.action-area .action-link:hover { background-color: #218838; }\n.action-area .in-store-info { margin: 0; font-style: italic; color: #495057; }\n\n/* Admin Page */\n.login-container, .editor-container { max-width: 800px; margin: 40px auto; padding: 30px; background: #fff; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }\n.login-container { text-align: center; }\n.login-container h2 { margin-top: 0; margin-bottom: 10px; }\n.login-container p { margin-bottom: 20px; color: #6c757d; }\n.login-container input[type=\"password\"] { width: 80%; padding: 12px; margin-bottom: 20px; border: 1px solid #ccc; border-radius: 4px; }\n\n.admin-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 15px; }\n.admin-header h1 { margin: 0; }\n\n.admin-btn { padding: 10px 20px; border: none; border-radius: 5px; color: white; font-size: 1rem; cursor: pointer; transition: background-color 0.2s; }\n#logout-btn { background-color: #dc3545; }\n#logout-btn:hover { background-color: #c82333; }\n#save-btn { background-color: #007bff; }\n#save-btn:hover { background-color: #0056b3; }\n#save-btn:disabled { background-color: #6c757d; cursor: not-allowed; }\n\n.login-container button { background-color: #007bff; }\n.login-container button:hover { background-color: #0056b3; }\n\n.instructions { font-size: 0.9rem; color: #6c757d; }\n#json-editor { width: 100%; height: 60vh; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; padding: 10px; font-family: 'Courier New', Courier, monospace; font-size: 0.95rem; resize: vertical; }\n.action-panel { margin-top: 20px; display: flex; align-items: center; }\n#status-indicator { margin-left: 15px; font-weight: bold; }\n#status-indicator.success { color: #28a745; }\n#status-indicator.error { color: #dc3545; }",
                "language": "css"
            },
            {
                "file_path": "static/js/main.js",
                "file_content": "document.addEventListener('DOMContentLoaded', function() {\n    // This script handles the filtering logic on the main page.\n    const filterButtons = document.querySelectorAll('.filter-btn');\n    const discountCards = document.querySelectorAll('.discount-card');\n\n    if (filterButtons.length === 0) return; // No filters, nothing to do.\n\n    filterButtons.forEach(button => {\n        button.addEventListener('click', () => {\n            const categoryToFilter = button.dataset.category;\n\n            // Update button active state\n            filterButtons.forEach(btn => btn.classList.remove('active'));\n            button.classList.add('active');\n\n            // Show or hide cards based on the selected category\n            discountCards.forEach(card => {\n                const cardCategory = card.dataset.category;\n                if (categoryToFilter === 'all' || cardCategory === categoryToFilter) {\n                    card.style.display = 'block';\n                } else {\n                    card.style.display = 'none';\n                }\n            });\n        });\n    });\n});\n\n// A simple function to copy text to the clipboard and provide user feedback.\nfunction copyToClipboard(text, buttonElement) {\n    navigator.clipboard.writeText(text).then(() => {\n        const originalText = buttonElement.textContent;\n        buttonElement.textContent = 'Copied!';\n        buttonElement.style.backgroundColor = '#28a745'; // Green for success\n\n        // Revert back after a short period\n        setTimeout(() => {\n            buttonElement.textContent = originalText;\n            buttonElement.style.backgroundColor = ''; // Revert to original color\n        }, 2000);\n    }).catch(err => {\n        console.error('Failed to copy text: ', err);\n        alert('Could not copy text.');\n    });\n}\n",
                "language": "javascript"
            },
            {
                "file_path": "static/js/admin.js",
                "file_content": "document.addEventListener('DOMContentLoaded', function() {\n    // This is the brain of the admin panel.\n    const editor = document.getElementById('json-editor');\n    const saveBtn = document.getElementById('save-btn');\n    const logoutBtn = document.getElementById('logout-btn');\n    const statusIndicator = document.getElementById('status-indicator');\n\n    // Helper function to show status messages to the user.\n    function showStatus(message, isError = false) {\n        statusIndicator.textContent = message;\n        statusIndicator.className = isError ? 'error' : 'success';\n    }\n\n    // Loads the current discounts.json content from our API.\n    function fetchAndDisplayData() {\n        fetch('/api/discounts')\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error('Could not fetch data. Your session might have expired.');\n                }\n                return response.json();\n            })\n            .then(data => {\n                // We pretty-print the JSON to make it human-editable.\n                const prettyJson = JSON.stringify(JSON.parse(data.content), null, 2);\n                editor.value = prettyJson;\n            })\n            .catch(error => {\n                showStatus(error.message, true);\n                editor.value = `Error loading data: ${error.message}`;\n            });\n    }\n\n    // Attaches the save logic to the save button.\n    saveBtn.addEventListener('click', function() {\n        const currentContent = editor.value;\n\n        // First, we must validate if the content is actually valid JSON.\n        try {\n            JSON.parse(currentContent);\n        } catch (e) {\n            showStatus('Error: The content is not valid JSON!', true);\n            return;\n        }\n\n        saveBtn.disabled = true;\n        showStatus('Saving and triggering deployment...', false);\n\n        fetch('/api/update', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: currentContent\n        })\n        .then(response => response.json())\n        .then(data => {\n            if (data.error) {\n                throw new Error(data.error);\n            }\n            showStatus(data.success, false);\n        })\n        .catch(error => {\n            showStatus(`Failed to save: ${error.message}`, true);\n        })\n        .finally(() => {\n            saveBtn.disabled = false;\n        });\n    });\n\n    // Attaches the logout logic to the logout button.\n    logoutBtn.addEventListener('click', function() {\n        fetch('/api/logout', { method: 'POST' })\n            .then(response => response.json())\n            .then(data => {\n                if (data.success) {\n                    // If logout is successful, refresh the page to show the login form.\n                    window.location.reload();\n                }\n            })\n            .catch(error => {\n                 showStatus(`Logout failed: ${error.message}`, true);\n            });\n    });\n\n    // Initial action when the page loads.\n    fetchAndDisplayData();\n});\n",
                "language": "javascript"
            },
            {
                "file_path": "discounts.json",
                "file_content": "[\n  {\n    \"id\": \"tech-101\",\n    \"storeName\": \"Tech Palace\",\n    \"category\": \"Tech\",\n    \"description\": \"10% off on all laptops for students. Perfect for the new semester.\",\n    \"type\": \"link\",\n    \"value\": \"https://example.com/tech-palace-student-deal\",\n    \"notes\": \"Requires verification with a valid student email.\"\n  },\n  {\n    \"id\": \"food-101\",\n    \"storeName\": \"Pizza Planet\",\n    \"category\": \"Food\",\n    \"description\": \"15% off your entire online order. Great for study groups!\",\n    \"type\": \"code\",\n    \"value\": \"ZURISTUDENT15\",\n    \"notes\": \"Valid until the end of the current semester.\"\n  },\n  {\n    \"id\": \"books-101\",\n    \"storeName\": \"Bookworm Haven\",\n    \"category\": \"Books\",\n    \"description\": \"Get a free coffee with any textbook purchase over 50 CHF.\",\n    \"type\": \"in-store\",\n    \"value\": \"Show Student ID\",\n    \"notes\": \"\"\n  },\n  {\n    \"id\": \"fitness-101\",\n    \"storeName\": \"Campus Gym\",\n    \"category\": \"Fitness\",\n    \"description\": \"First month free when you sign up for a yearly student membership.\",\n    \"type\": \"link\",\n    \"value\": \"https://example.com/campus-gym-offer\",\n    \"notes\": \"Offer available for first-time members only.\"\n  },\n  {\n    \"id\": \"food-102\",\n    \"storeName\": \"The Healthy Bowl\",\n    \"category\": \"Food\",\n    \"description\": \"2-for-1 salad bowls every Tuesday with a student ID.\",\n    \"type\": \"in-store\",\n    \"value\": \"Show Student ID\",\n    \"notes\": \"Only valid on Tuesdays.\"\n  }\n]\n",
                "language": "json"
            },
            {
                "file_path": "vercel.json",
                "file_content": "{\n  \"builds\": [\n    {\n      \"src\": \"api/index.py\",\n      \"use\": \"@vercel/python\"\n    }\n  ],\n  \"routes\": [\n    {\n      \"src\": \"/static/(.*)\",\n      \"dest\": \"/static/$1\"\n    },\n    {\n      \"src\": \"/(.*)\",\n      \"dest\": \"api/index.py\"\n    }\n  ]\n}\n",
                "language": "json"
            },
            {
                "file_path": "requirements.txt",
                "file_content": "Flask\nrequests\npython-dotenv\n",
                "language": "plaintext"
            },
            {
                "file_path": ".gitignore",
                "file_content": "# Byte-compiled / optimized / DLL files\n__pycache__/\n*.py[cod]\n*$py.class\n\n# C extensions\n*.so\n\n# Distribution / packaging\n.Python\nbuild/\ndevelop-eggs/\ndist/\ndownloads/\neggs/\n.eggs/\nlib/\nlib64/\nparts/\nsdist/\nvar/\nwheels/\n*.egg-info/\n.installed.cfg\n*.egg\nMANIFEST\n\n# Environments\n.env\n.venv\nenv/\nvenv/\nENV/\nenv.bak/\nvenv.bak/\n\n# Flask specific\ninstance/\n.webassets-cache\n\n# IDE settings\n.idea/\n.vscode/\n\n# Other\n*.log\nlocal_settings.py\ndb.sqlite3\n",
                "language": "plaintext"
            }
        ]
    }
}